<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Kraken Z63 Custom Dashboard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  height: 100%; overflow: hidden;
  font-family: 'Segoe UI', system-ui, sans-serif;
  user-select: none;
  background: #000;
  transform: translateZ(0);
  image-rendering: pixelated;
  -webkit-font-smoothing: antialiased;
}

#bg-layer {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-size: cover; background-position: center;
  transition: filter 0.3s ease, background-position 0.2s ease;
  cursor: grab;
}
#bg-layer:active { cursor: grabbing; }

#file-input {
  display: none;
}

.content-layer {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  opacity: 0; transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
}
.content-layer.active { opacity: 1; z-index: 2; pointer-events: auto; }

#clock-content {
  text-align: center; color: #fff; font-weight: 900;
  gap: var(--hours-spacing, 0px);
  transform: scale(var(--global-scale, 1));
}
#hours { 
  font-size: var(--hours-size, 140px); 
  font-weight: var(--hours-weight, 900); 
}
#minutes { 
  font-size: var(--minutes-size, 100px); 
  font-weight: var(--minutes-weight, 700); 
  margin-top: var(--hours-spacing, 0px);
}

#monitoring-content {
  display: flex !important;
  flex-direction: row !important;
  justify-content: center;
  align-items: center;
  gap: var(--temp-spacing, 80px);
  text-align: center; color: #fff;
  width: 100%;
  transform: scale(var(--global-scale, 1));
}
.temp-item { 
  display: flex !important;
  flex-direction: column;
  align-items: center; 
  gap: var(--temp-gap, 8px);
  flex: 1;
  max-width: 200px;
}
.temp-label { 
  font-size: var(--label-size, 18px); 
  font-weight: var(--label-weight, 600); 
  opacity: var(--label-opacity, 0.8);
  margin-bottom: 0;
}
.temp-value { 
  font-size: var(--temp-size, 80px); 
  font-weight: var(--temp-weight, 900);
  text-shadow: 0 0 var(--glow-intensity, 10px) currentColor;
  margin: 0;
}

/* BASE N√âGATIF AVANC√â */
body.negative .content-layer,
body.gradient .content-layer {
  mix-blend-mode: difference;
  filter: 
    brightness(var(--brightness, 1.2)) 
    contrast(var(--contrast, 1.3))
    saturate(var(--saturation, 1.2))
    hue-rotate(var(--hue-rotate, 0deg))
    sepia(var(--sepia, 0))
    blur(var(--blur, 0px));
}

/* GRADIENT SPECTRAL PRO */
body.gradient #hours,
body.gradient #minutes,
body.gradient .temp-value,
body.gradient .temp-label {
  background: 
    linear-gradient(var(--gradient-angle, 120deg), 
      var(--color1, #ff1744), 
      var(--color2, #ff6d00), 
      var(--color3, #ffeb3b), 
      var(--color4, #00e676), 
      var(--color5, #00b0ff), 
      var(--color6, #9c27b0), 
      var(--color7, #ff4081)
    );
  background-size: var(--gradient-size, 400%) var(--gradient-size, 400%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: 
    gradient-flow var(--gradient-speed, 3s) var(--gradient-timing, linear) var(--gradient-iteration, infinite),
    gradient-rotate var(--rotation-speed, 20s) linear infinite;
  filter: 
    brightness(var(--gradient-brightness, 1.1)) 
    contrast(var(--gradient-contrast, 1.2)) 
    saturate(var(--gradient-saturation, 1.3))
    hue-rotate(var(--gradient-hue, 0deg));
}

@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  100% { background-position: var(--gradient-size, 400%) 50%; }
}

@keyframes gradient-rotate {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

/* Contr√¥les am√©lior√©s */
#controls {
  position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.95); backdrop-filter: blur(20px);
  padding: 15px; border-radius: 15px; color: white;
  display: none; flex-wrap: wrap; gap: 10px; max-width: 95%;
  z-index: 10; font-size: 12px; max-height: 80vh; overflow-y: auto;
  border: 1px solid rgba(255,255,255,0.1);
}
.control-group { 
  display: flex; flex-direction: column; gap: 3px; min-width: 140px;
}
.control-group label { 
  font-weight: 600; opacity: 0.9; font-size: 11px;
}
.control-group input, .control-group select { 
  background: rgba(255,255,255,0.1); border: none; 
  border-radius: 5px; padding: 3px; color: white; font-size: 11px;
}
input[type="range"] { height: 4px; }
input[type="range"]::-webkit-slider-thumb {
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4); 
  width: 18px; height: 18px; border-radius: 50%;
  border: 2px solid white;
}
input[type="color"] { 
  width: 40px; height: 30px; padding: 0; border-radius: 5px;
  cursor: pointer;
}
.file-upload {
  background: rgba(255,255,255,0.1); border: 2px dashed rgba(255,255,255,0.3);
  padding: 8px; border-radius: 5px; text-align: center; cursor: pointer;
  transition: all 0.2s;
}
.file-upload:hover { border-color: #4ecdc4; background: rgba(78,205,196,0.1); }
.file-upload.dragover { border-color: #4ecdc4; background: rgba(78,205,196,0.2); }

#toggle-panel {
  position: fixed; top: 10px; right: 10px;
  background: linear-gradient(45deg, rgba(0,0,0,0.9), rgba(78,205,196,0.2)); 
  color: white; border: none;
  padding: 12px 18px; border-radius: 25px; cursor: pointer;
  font-size: 14px; z-index: 11; opacity: 0; transition: all 0.3s;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
#toggle-panel:hover { opacity: 1; transform: scale(1.05); }

@media (max-height: 480px) {
  #hours { font-size: 100px !important; }
  #minutes { font-size: 70px !important; }
  .temp-value { font-size: 60px !important; }
  .temp-label { font-size: 14px !important; }
  #monitoring-content { gap: 40px !important; }
  #controls { 
    bottom: 5px; padding: 10px; font-size: 10px;
    transform: translateX(-50%) scale(0.85);
  }
}
</style>
</head>
<body class="negative">

<input type="file" id="file-input" accept="image/*">

<div id="bg-layer"></div>

<div id="clock-content" class="content-layer active">
  <div id="hours">--</div>
  <div id="minutes">--</div>
</div>

<div id="monitoring-content" class="content-layer">
  <div class="temp-item">
    <div class="temp-label">CPU</div>
    <div class="temp-value" id="cpu-temp">--¬∞</div>
  </div>
  <div class="temp-item">
    <div class="temp-label">GPU</div>
    <div class="temp-value" id="gpu-temp">--¬∞</div>
  </div>
</div>

<div id="controls">
  <!-- SCALING -->
  <div class="control-group">
    <label>Taille globale (%)</label>
    <input type="range" id="global-scale" min="30" max="400" step="5" value="100">
  </div>
  
  <!-- BACKGROUND AVANC√â -->
  <div class="control-group">
    <label>üìÅ Glisser image</label>
    <div class="file-upload" id="file-upload">
      <div>Glisser ou cliquer</div>
      <div style="font-size: 10px; opacity: 0.7;">(PNG, JPG, GIF)</div>
    </div>
  </div>
  <div class="control-group">
    <label>URL Fond</label>
    <input type="text" id="bg-url" placeholder="https://...">
  </div>
  <div class="control-group">
    <label>Pos X (%)</label>
    <input type="range" id="bg-x" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Pos Y (%)</label>
    <input type="range" id="bg-y" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Taille Fond (%)</label>
    <input type="range" id="bg-size" min="25" max="500" value="100">
  </div>
  
  <!-- EFFETS N√âGATIF PRO -->
  <div class="control-group">
    <label>üé® Luminosit√©</label>
    <input type="range" id="brightness" min="0.1" max="5" step="0.1" value="1.2">
  </div>
  <div class="control-group">
    <label>üé® Contraste</label>
    <input type="range" id="contrast" min="0.1" max="5" step="0.1" value="1.3">
  </div>
  <div class="control-group">
    <label>üé® Saturation</label>
    <input type="range" id="saturation" min="0" max="3" step="0.1" value="1.2">
  </div>
  <div class="control-group">
    <label>üé® Teinte (¬∞)</label>
    <input type="range" id="hue-rotate" min="-180" max="180" value="0">
  </div>
  <div class="control-group">
    <label>üé® S√©pia</label>
    <input type="range" id="sepia" min="0" max="1" step="0.1" value="0">
  </div>
  <div class="control-group">
    <label>üé® Flou (px)</label>
    <input type="range" id="blur" min="0" max="10" step="0.5" value="0">
  </div>
  
  <!-- GRADIENT SPECTRAL PRO -->
  <div class="control-group">
    <label>Mode</label>
    <select id="color-mode">
      <option value="negative">N√©gatif PRO</option>
      <option value="gradient">Gradient SPECTRAL PRO</option>
    </select>
  </div>
  
  <!-- COULEURS -->
  <div class="control-group">
    <label>C1</label><input type="color" id="color1" value="#ff1744">
  </div>
  <div class="control-group">
    <label>C2</label><input type="color" id="color2" value="#ff6d00">
  </div>
  <div class="control-group">
    <label>C3</label><input type="color" id="color3" value="#ffeb3b">
  </div>
  <div class="control-group">
    <label>C4</label><input type="color" id="color4" value="#00e676">
  </div>
  <div class="control-group">
    <label>C5</label><input type="color" id="color5" value="#00b0ff">
  </div>
  <div class="control-group">
    <label>C6</label><input type="color" id="color6" value="#9c27b0">
  </div>
  <div class="control-group">
    <label>C7</label><input type="color" id="color7" value="#ff4081">
  </div>
  
  <!-- GRADIENT AVANC√â -->
  <div class="control-group">
    <label>Angle (¬∞)</label>
    <input type="range" id="gradient-angle" min="0" max="360" value="120">
  </div>
  <div class="control-group">
    <label>Vitesse (s)</label>
    <input type="range" id="gradient-speed" min="0.1" max="30" step="0.1" value="3">
  </div>
  <div class="control-group">
    <label>Taille (%)</label>
    <input type="range" id="gradient-size" min="100" max="2000" value="400">
  </div>
  <div class="control-group">
    <label>Rotation (¬∞/s)</label>
    <input type="range" id="rotation-speed" min="0" max="60" value="0">
  </div>
  <div class="control-group">
    <label>Sat. Gradient</label>
    <input type="range" id="gradient-saturation" min="0.5" max="4" step="0.1" value="1.3">
  </div>
</div>

<button id="toggle-panel">‚öôÔ∏è PRO</button>

<script>
const controls = {
  'global-scale': document.getElementById('global-scale'),
  'bg-url': document.getElementById('bg-url'),
  'bg-x': document.getElementById('bg-x'),
  'bg-y': document.getElementById('bg-y'),
  'bg-size': document.getElementById('bg-size'),
  'brightness': document.getElementById('brightness'),
  'contrast': document.getElementById('contrast'),
  'saturation': document.getElementById('saturation'),
  'hue-rotate': document.getElementById('hue-rotate'),
  'sepia': document.getElementById('sepia'),
  'blur': document.getElementById('blur'),
  'color-mode': document.getElementById('color-mode'),
  'color1': document.getElementById('color1'), 'color2': document.getElementById('color2'),
  'color3': document.getElementById('color3'), 'color4': document.getElementById('color4'),
  'color5': document.getElementById('color5'), 'color6': document.getElementById('color6'),
  'color7': document.getElementById('color7'),
  'gradient-angle': document.getElementById('gradient-angle'),
  'gradient-speed': document.getElementById('gradient-speed'),
  'gradient-size': document.getElementById('gradient-size'),
  'rotation-speed': document.getElementById('rotation-speed'),
  'gradient-saturation': document.getElementById('gradient-saturation')
};

const clockContent = document.getElementById('clock-content');
const monitoringContent = document.getElementById('monitoring-content');
const bgLayer = document.getElementById('bg-layer');
const controlsPanel = document.getElementById('controls');
const togglePanel = document.getElementById('toggle-panel');
const fileInput = document.getElementById('file-input');
const fileUpload = document.getElementById('file-upload');

// Horloge
function updateClock() {
  const now = new Date();
  document.getElementById('hours').textContent = 
    now.getHours().toString().padStart(2, '0');
  document.getElementById('minutes').textContent = 
    now.getMinutes().toString().padStart(2, '0');
}
setInterval(updateClock, 1000);
updateClock();

// Cycle
let showClock = true;
function cycleContent() {
  if (showClock) {
    clockContent.classList.add('active');
    monitoringContent.classList.remove('active');
  } else {
    monitoringContent.classList.add('active');
    clockContent.classList.remove('active');
  }
  showClock = !showClock;
}
setInterval(cycleContent, 10000);

// Monitoring
function updateMonitoring(data) {
  try {
    const { cpus = [], gpus = [] } = data || {};
    document.getElementById('cpu-temp').textContent = 
      cpus[0]?.temperature ? `${Math.round(cpus[0].temperature)}¬∞` : '--¬∞';
    document.getElementById('gpu-temp').textContent = 
      gpus[0]?.temperature ? `${Math.round(gpus[0].temperature)}¬∞` : '--¬∞';
  } catch (e) { console.error('Monitoring error:', e); }
}

function simulateData() {
  if (!window.nzxt?.v1) {
    document.getElementById('cpu-temp').textContent = 
      `${Math.round(40 + Math.random() * 40)}¬∞`;
    document.getElementById('gpu-temp').textContent = 
      `${Math.round(45 + Math.random() * 50)}¬∞`;
  }
}
setInterval(simulateData, 3000);

window.nzxt = {
  v1: { onMonitoringDataUpdate: updateMonitoring, onError: e => console.warn('NZXT error:', e) }
};

// UPLOAD FICHIER
function loadImageFile(file) {
  if (!file.type.startsWith('image/')) return;
  const reader = new FileReader();
  reader.onload = e => {
    bgLayer.style.backgroundImage = `url(${e.target.result})`;
    localStorage.setItem('bg-image', e.target.result);
  };
  reader.readAsDataURL(file);
}

fileUpload.addEventListener('click', () => fileInput.click());
fileUpload.addEventListener('dragover', e => {
  e.preventDefault();
  fileUpload.classList.add('dragover');
});
fileUpload.addEventListener('dragleave', () => fileUpload.classList.remove('dragover'));
fileUpload.addEventListener('drop', e => {
  e.preventDefault();
  fileUpload.classList.remove('dragover');
  const files = e.dataTransfer.files;
  if (files.length > 0) loadImageFile(files[0]);
});
fileInput.addEventListener('change', e => {
  if (e.target.files[0]) loadImageFile(e.target.files[0]);
});

// Mise √† jour styles
function updateStyles() {
  // Global scale
  const globalScale = controls['global-scale'].value / 100;
  document.documentElement.style.setProperty('--global-scale', globalScale);
  
  // Background
  const url = controls['bg-url'].value.trim();
  if (url) {
    const img = new Image();
    img.onload = () => bgLayer.style.backgroundImage = `url('${url}')`;
    img.onerror = () => bgLayer.style.background = '#1a1a1a';
    img.src = url;
  }
  bgLayer.style.backgroundPosition = `${controls['bg-x'].value}% ${controls['bg-y'].value}%`;
  bgLayer.style.backgroundSize = `${controls['bg-size'].value}% auto`;
  
  // Effets n√©gatif PRO
  ['brightness', 'contrast', 'saturation', 'hue-rotate', 'sepia', 'blur'].forEach(key => {
    document.documentElement.style.setProperty(`--${key}`, controls[key].value);
  });
  
  // Mode
  const mode = controls['color-mode'].value;
  document.body.className = mode;
  
  // Couleurs
  ['color1', 'color2', 'color3', 'color4', 'color5', 'color6', 'color7'].forEach(key => {
    document.documentElement.style.setProperty(`--${key}`, controls[key].value);
  });
  
  // Gradient PRO
  if (mode === 'gradient') {
    document.documentElement.style.setProperty('--gradient-angle', `${controls['gradient-angle'].value}deg`);
    document.documentElement.style.setProperty('--gradient-speed', `${controls['gradient-speed'].value}s`);
    document.documentElement.style.setProperty('--gradient-size', `${controls['gradient-size'].value}%`);
    document.documentElement.style.setProperty('--rotation-speed', `${controls['rotation-speed'].value}s`);
    document.documentElement.style.setProperty('--gradient-saturation', controls['gradient-saturation'].value);
  }
  
  // Sauvegarde
  Object.keys(controls).forEach(key => localStorage.setItem(key, controls[key].value));
}

// Drag background
let isDragging = false, startX, startY;
bgLayer.addEventListener('mousedown', e => {
  isDragging = true; startX = e.clientX; startY = e.clientY;
  bgLayer.style.transition = 'none';
});
document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  const dx = (e.clientX - startX) / window.innerWidth * 100;
  const dy = (e.clientY - startY) / window.innerHeight * 100;
  controls['bg-x'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-x'].value) + dx));
  controls['bg-y'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-y'].value) + dy));
  updateStyles();
  startX = e.clientX; startY = e.clientY;
});
document.addEventListener('mouseup', () => {
  isDragging = false;
  bgLayer.style.transition = 'filter 0.3s ease, background-position 0.2s ease';
});

// √âv√©nements
Object.values(controls).forEach(control => {
  ['input', 'change'].forEach(event => control.addEventListener(event, updateStyles));
});

togglePanel.addEventListener('click', () => {
  const isVisible = controlsPanel.style.display === 'flex';
  controlsPanel.style.display = isVisible ? 'none' : 'flex';
  togglePanel.textContent = isVisible ? '‚öôÔ∏è PRO' : '‚úï';
});

// Chargement
function loadSettings() {
  Object.keys(controls).forEach(key => {
    const saved = localStorage.getItem(key);
    if (saved !== null) controls[key].value = saved;
  });
  const savedBg = localStorage.getItem('bg-image');
  if (savedBg) bgLayer.style.backgroundImage = `url(${savedBg})`;
  updateStyles();
  controlsPanel.style.display = 'none';
}

loadSettings();
clockContent.classList.add('active');
</script>
</body>
</html>
