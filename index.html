<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Kraken Z63 Custom Dashboard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  height: 100%; overflow: hidden;
  font-family: 'Segoe UI', system-ui, sans-serif;
  user-select: none;
  background: #000;
  transform: translateZ(0);
  image-rendering: pixelated;
  -webkit-font-smoothing: antialiased;
}

#bg-layer {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-size: cover; background-position: center;
  transition: filter 0.3s ease, background-position 0.2s ease;
  cursor: grab;
}
#bg-layer:active { cursor: grabbing; }

.content-layer {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  opacity: 0; transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
}
.content-layer.active { opacity: 1; z-index: 2; pointer-events: auto; }

#clock-content {
  text-align: center; color: #fff; font-weight: 900;
  gap: var(--hours-spacing, 0px);
}
#hours { font-size: var(--hours-size, 140px); font-weight: var(--hours-weight, 900); }
#minutes { font-size: var(--minutes-size, 100px); font-weight: var(--minutes-weight, 700); margin-top: var(--hours-spacing, 0px); }

#monitoring-content {
  /* CÔTÉ À CÔTÉ - FLEX ROW */
  display: flex !important;
  flex-direction: row !important; /* Horizontal */
  justify-content: center;
  align-items: center;
  gap: var(--temp-spacing, 80px); /* Espacement horizontal entre CPU et GPU */
  text-align: center; color: #fff;
  width: 100%;
}
.temp-item { 
  display: flex !important;
  flex-direction: column;
  align-items: center; 
  gap: 8px; /* Espacement label ↔ valeur */
  flex: 1; /* Également réparti */
  max-width: 200px;
}
.temp-label { 
  font-size: var(--label-size, 18px); 
  font-weight: var(--label-weight, 600); 
  opacity: 0.8;
  margin-bottom: 0;
}
.temp-value { 
  font-size: var(--temp-size, 80px); 
  font-weight: var(--temp-weight, 900);
  text-shadow: 0 0 10px currentColor;
  margin: 0;
}

/* BASE NÉGATIF POUR TOUS LES MODES */
body.negative .content-layer,
body.gradient .content-layer {
  mix-blend-mode: difference;
  filter: brightness(var(--brightness, 1.2)) contrast(var(--contrast, 1.3));
}

/* GRADIENT SUR NÉGATIF */
body.gradient #hours,
body.gradient #minutes,
body.gradient .temp-value,
body.gradient .temp-label {
  background: linear-gradient(120deg, #ff0040, #ff7b00, #fffb00, #00ff9d, #00c3ff, #7b00ff, #ff00c8);
  background-size: var(--gradient-size, 400%) var(--gradient-size, 400%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-flow var(--gradient-speed, 3s) linear infinite;
  filter: brightness(var(--gradient-brightness, 1.1)) contrast(var(--gradient-contrast, 1.2));
}
@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Contrôles */
#controls {
  position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.9); backdrop-filter: blur(20px);
  padding: 15px; border-radius: 15px; color: white;
  display: none; flex-wrap: wrap; gap: 10px; max-width: 95%;
  z-index: 10; font-size: 12px; max-height: 70vh; overflow-y: auto;
}
.control-group { 
  display: flex; flex-direction: column; gap: 3px; min-width: 140px;
}
.control-group label { 
  font-weight: 600; opacity: 0.9; font-size: 11px;
}
.control-group input, .control-group select { 
  background: rgba(255,255,255,0.1); border: none; 
  border-radius: 5px; padding: 3px; color: white; font-size: 11px;
}
input[type="range"] { height: 3px; }
input[type="range"]::-webkit-slider-thumb {
  background: #ff6b6b; width: 16px; height: 16px; border-radius: 50%;
}

#toggle-panel {
  position: fixed; top: 10px; right: 10px;
  background: rgba(0,0,0,0.8); color: white; border: none;
  padding: 10px 15px; border-radius: 25px; cursor: pointer;
  font-size: 14px; z-index: 11; opacity: 0; transition: opacity 0.3s;
}
#toggle-panel:hover { opacity: 1; }

@media (max-height: 480px) {
  #hours { font-size: 100px !important; }
  #minutes { font-size: 70px !important; }
  .temp-value { font-size: 60px !important; }
  .temp-label { font-size: 14px !important; }
  #monitoring-content { gap: 40px !important; }
  #controls { 
    bottom: 5px; padding: 10px; font-size: 10px;
    transform: translateX(-50%) scale(0.85);
  }
}
</style>
</head>
<body class="negative">

<div id="bg-layer"></div>

<div id="clock-content" class="content-layer active">
  <div id="hours">--</div>
  <div id="minutes">--</div>
</div>

<div id="monitoring-content" class="content-layer">
  <div class="temp-item">
    <div class="temp-label">CPU</div>
    <div class="temp-value" id="cpu-temp">--°</div>
  </div>
  <div class="temp-item">
    <div class="temp-label">GPU</div>
    <div class="temp-value" id="gpu-temp">--°</div>
  </div>
</div>

<div id="controls">
  <!-- Horloge -->
  <div class="control-group">
    <label>Taille Heures</label>
    <input type="range" id="hours-size" min="50" max="300" value="140">
  </div>
  <div class="control-group">
    <label>Taille Minutes</label>
    <input type="range" id="minutes-size" min="30" max="200" value="100">
  </div>
  <div class="control-group">
    <label>Gras Heures</label>
    <input type="range" id="hours-weight" min="100" max="900" value="900">
  </div>
  <div class="control-group">
    <label>Gras Minutes</label>
    <input type="range" id="minutes-weight" min="100" max="900" value="700">
  </div>
  <div class="control-group">
    <label>Espacement H-M</label>
    <input type="range" id="hours-spacing" min="-50" max="50" value="0">
  </div>
  
  <!-- Monitoring CÔTÉ À CÔTÉ -->
  <div class="control-group">
    <label>Taille Températures</label>
    <input type="range" id="temp-size" min="30" max="150" value="80">
  </div>
  <div class="control-group">
    <label>Gras Températures</label>
    <input type="range" id="temp-weight" min="100" max="900" value="900">
  </div>
  <div class="control-group">
    <label>Taille Labels</label>
    <input type="range" id="label-size" min="12" max="40" value="18">
  </div>
  <div class="control-group">
    <label>Espacement CPU-GPU</label>
    <input type="range" id="temp-spacing" min="20" max="200" value="80">
  </div>
  
  <!-- Background -->
  <div class="control-group">
    <label>URL Fond</label>
    <input type="text" id="bg-url" placeholder="URL image">
  </div>
  <div class="control-group">
    <label>Pos X (%)</label>
    <input type="range" id="bg-x" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Pos Y (%)</label>
    <input type="range" id="bg-y" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Taille Fond (%)</label>
    <input type="range" id="bg-size" min="50" max="200" value="100">
  </div>
  
  <!-- Mode Négatif -->
  <div class="control-group">
    <label>Luminosité</label>
    <input type="range" id="brightness" min="0.5" max="2" step="0.1" value="1.2">
  </div>
  <div class="control-group">
    <label>Contraste</label>
    <input type="range" id="contrast" min="0.8" max="2" step="0.1" value="1.3">
  </div>
  
  <!-- Mode Gradient -->
  <div class="control-group">
    <label>Mode</label>
    <select id="color-mode">
      <option value="negative">Négatif</option>
      <option value="gradient">Gradient + Négatif</option>
    </select>
  </div>
  <div class="control-group">
    <label>Vitesse Gradient</label>
    <input type="range" id="gradient-speed" min="1" max="10" value="3">
  </div>
  <div class="control-group">
    <label>Taille Gradient</label>
    <input type="range" id="gradient-size" min="200" max="800" value="400">
  </div>
</div>

<button id="toggle-panel">⚙️</button>

<script>
const controls = {
  'hours-size': document.getElementById('hours-size'),
  'minutes-size': document.getElementById('minutes-size'),
  'hours-weight': document.getElementById('hours-weight'),
  'minutes-weight': document.getElementById('minutes-weight'),
  'hours-spacing': document.getElementById('hours-spacing'),
  'temp-size': document.getElementById('temp-size'),
  'temp-weight': document.getElementById('temp-weight'),
  'label-size': document.getElementById('label-size'),
  'temp-spacing': document.getElementById('temp-spacing'),
  'bg-url': document.getElementById('bg-url'),
  'bg-x': document.getElementById('bg-x'),
  'bg-y': document.getElementById('bg-y'),
  'bg-size': document.getElementById('bg-size'),
  'brightness': document.getElementById('brightness'),
  'contrast': document.getElementById('contrast'),
  'color-mode': document.getElementById('color-mode'),
  'gradient-speed': document.getElementById('gradient-speed'),
  'gradient-size': document.getElementById('gradient-size')
  // Pas de label-weight car on utilise var(--temp-weight) pour tout
};

const clockContent = document.getElementById('clock-content');
const monitoringContent = document.getElementById('monitoring-content');
const bgLayer = document.getElementById('bg-layer');
const controlsPanel = document.getElementById('controls');
const togglePanel = document.getElementById('toggle-panel');

// Horloge
function updateClock() {
  const now = new Date();
  document.getElementById('hours').textContent = 
    now.getHours().toString().padStart(2, '0');
  document.getElementById('minutes').textContent = 
    now.getMinutes().toString().padStart(2, '0');
}
setInterval(updateClock, 1000);
updateClock();

// Cycle 10s
let showClock = true;
function cycleContent() {
  if (showClock) {
    clockContent.classList.add('active');
    monitoringContent.classList.remove('active');
  } else {
    monitoringContent.classList.add('active');
    clockContent.classList.remove('active');
  }
  showClock = !showClock;
}
setInterval(cycleContent, 10000);

// Monitoring NZXT
function updateMonitoring(data) {
  try {
    const { cpus = [], gpus = [] } = data || {};
    document.getElementById('cpu-temp').textContent = 
      cpus[0]?.temperature ? `${Math.round(cpus[0].temperature)}°` : '--°';
    document.getElementById('gpu-temp').textContent = 
      gpus[0]?.temperature ? `${Math.round(gpus[0].temperature)}°` : '--°';
  } catch (e) {
    console.error('Monitoring error:', e);
  }
}

// Simulation
function simulateData() {
  if (!window.nzxt?.v1) {
    document.getElementById('cpu-temp').textContent = 
      `${Math.round(40 + Math.random() * 40)}°`;
    document.getElementById('gpu-temp').textContent = 
      `${Math.round(45 + Math.random() * 50)}°`;
  }
}
setInterval(simulateData, 3000);

window.nzxt = {
  v1: {
    onMonitoringDataUpdate: updateMonitoring,
    onError: (error) => console.warn('NZXT error:', error)
  }
};

// Mise à jour styles
function updateStyles() {
  // Horloge
  document.documentElement.style.setProperty('--hours-size', `${controls['hours-size'].value}px`);
  document.documentElement.style.setProperty('--minutes-size', `${controls['minutes-size'].value}px`);
  document.documentElement.style.setProperty('--hours-weight', controls['hours-weight'].value);
  document.documentElement.style.setProperty('--minutes-weight', controls['minutes-weight'].value);
  document.documentElement.style.setProperty('--hours-spacing', `${controls['hours-spacing'].value}px`);
  
  // Monitoring CÔTÉ À CÔTÉ
  document.documentElement.style.setProperty('--temp-size', `${controls['temp-size'].value}px`);
  document.documentElement.style.setProperty('--temp-weight', controls['temp-weight'].value);
  document.documentElement.style.setProperty('--label-size', `${controls['label-size'].value}px`);
  document.documentElement.style.setProperty('--temp-spacing', `${controls['temp-spacing'].value}px`);
  
  // Labels utilisent le même poids que les valeurs
  document.documentElement.style.setProperty('--label-weight', controls['temp-weight'].value);
  
  // Background
  const url = controls['bg-url'].value.trim();
  if (url) {
    const img = new Image();
    img.onload = () => bgLayer.style.backgroundImage = `url('${url}')`;
    img.onerror = () => bgLayer.style.background = '#1a1a1a';
    img.src = url;
  }
  bgLayer.style.backgroundPosition = `${controls['bg-x'].value}% ${controls['bg-y'].value}%`;
  bgLayer.style.backgroundSize = `${controls['bg-size'].value}% auto`;
  
  // Négatif pour tous
  document.documentElement.style.setProperty('--brightness', controls['brightness'].value);
  document.documentElement.style.setProperty('--contrast', controls['contrast'].value);
  
  // Mode couleur
  const mode = controls['color-mode'].value;
  document.body.className = mode;
  
  // Gradient
  if (mode === 'gradient') {
    document.documentElement.style.setProperty('--gradient-speed', `${controls['gradient-speed'].value}s`);
    document.documentElement.style.setProperty('--gradient-size', `${controls['gradient-size'].value}%`);
  }
  
  // Sauvegarde
  Object.keys(controls).forEach(key => {
    localStorage.setItem(key, controls[key].value);
  });
}

// Drag background
let isDragging = false, startX, startY;
bgLayer.addEventListener('mousedown', (e) => {
  isDragging = true; startX = e.clientX; startY = e.clientY;
  bgLayer.style.transition = 'none';
});
document.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  const dx = (e.clientX - startX) / window.innerWidth * 100;
  const dy = (e.clientY - startY) / window.innerHeight * 100;
  controls['bg-x'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-x'].value) + dx));
  controls['bg-y'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-y'].value) + dy));
  updateStyles();
  startX = e.clientX; startY = e.clientY;
});
document.addEventListener('mouseup', () => {
  isDragging = false;
  bgLayer.style.transition = 'filter 0.3s ease, background-position 0.2s ease';
});

// Événements
Object.values(controls).forEach(control => {
  ['input', 'change'].forEach(event => {
    control.addEventListener(event, updateStyles);
  });
});

togglePanel.addEventListener('click', () => {
  const isVisible = controlsPanel.style.display === 'flex';
  controlsPanel.style.display = isVisible ? 'none' : 'flex';
  togglePanel.textContent = isVisible ? '⚙️' : '✕';
});

// Chargement
function loadSettings() {
  Object.keys(controls).forEach(key => {
    const saved = localStorage.getItem(key);
    if (saved !== null) controls[key].value = saved;
  });
  updateStyles();
  controlsPanel.style.display = 'none';
}

// Init
loadSettings();
clockContent.classList.add('active');
</script>
</body>
</html>
