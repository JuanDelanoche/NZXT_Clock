<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kraken Z63 Custom Dashboard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  height: 100vh; width: 100vw; overflow: hidden;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  user-select: none; background: #000;
  transform: translateZ(0);
}

#bg-layer {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-size: cover; background-position: center;
  transition: filter 0.3s ease, background-position 0.2s ease;
  cursor: grab; z-index: 1;
}
#bg-layer:active { cursor: grabbing; }

#file-input { display: none; }

.content-layer {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  opacity: 0; transition: opacity 0.5s;
  pointer-events: none; z-index: 2;
}
.content-layer.active { opacity: 1; pointer-events: auto; }

#clock-content { text-align: center; color: #fff; }
#hours, #minutes { line-height: 1 !important; display: inline-block !important; }

#monitoring-content {
  display: flex !important; flex-direction: row !important;
  justify-content: center; align-items: center;
  width: 100%; text-align: center; color: #fff;
}
.temp-item { 
  display: flex !important; flex-direction: column;
  align-items: center; flex: 1;
}
.temp-label, .temp-value { line-height: 1 !important; }

body.negative .content-layer, body.gradient .content-layer {
  mix-blend-mode: difference !important;
  filter: 
    brightness(var(--brightness, 1.2)) !important
    contrast(var(--contrast, 1.3)) !important
    saturate(var(--saturation, 1.2)) !important;
}

body.gradient #hours, body.gradient #minutes,
body.gradient .temp-value, body.gradient .temp-label {
  background: linear-gradient(var(--gradient-angle, 45deg), 
    var(--primary-color, #ff6b6b), var(--secondary-color, #4ecdc4), 
    var(--accent-color, #45b7d1), var(--primary-color, #ff6b6b)) !important;
  background-size: var(--gradient-size, 300%) 100% !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  animation: gradient-flow var(--gradient-speed, 4s) linear infinite !important;
}

@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  100% { background-position: 300% 50%; }
}

#controls {
  position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.95); backdrop-filter: blur(20px);
  padding: 15px; border-radius: 15px; color: white;
  display: none; flex-wrap: wrap; gap: 10px; max-width: 95%;
  z-index: 10; font-size: 12px; max-height: 80vh; overflow-y: auto;
  border: 1px solid rgba(255,255,255,0.1);
}
.control-group { 
  display: flex; flex-direction: column; gap: 3px; min-width: 130px; 
}
.control-group label { font-weight: 600; opacity: 0.9; font-size: 11px; }
.control-group input, .control-group select { 
  background: rgba(255,255,255,0.1); border: none; border-radius: 5px; 
  padding: 3px; color: white; font-size: 11px;
}
input[type="range"] { height: 4px; }
input[type="range"]::-webkit-slider-thumb {
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4); width: 16px; height: 16px; 
  border-radius: 50%; border: 2px solid white;
}
input[type="color"] { width: 35px; height: 25px; padding: 0; }
.file-upload {
  background: rgba(255,255,255,0.1); border: 2px dashed rgba(255,255,255,0.3);
  padding: 6px; border-radius: 5px; text-align: center; cursor: pointer; font-size: 10px;
}
.file-upload:hover { border-color: #4ecdc4; background: rgba(78,205,196,0.1); }

#toggle-panel {
  position: fixed; top: 10px; right: 10px;
  background: linear-gradient(45deg, rgba(0,0,0,0.9), rgba(78,205,196,0.2)); 
  color: white; border: none; padding: 12px 18px; border-radius: 25px; 
  cursor: pointer; font-size: 14px; z-index: 11; opacity: 0; transition: all 0.3s;
}
#toggle-panel:hover { opacity: 1; transform: scale(1.05); }
#toggle-panel.show { opacity: 1; }
</style>
</head>
<body class="negative">

<input type="file" id="file-input" accept="image/*">

<div id="bg-layer"></div>

<div id="clock-content" class="content-layer active">
  <div id="hours">--</div>
  <div id="minutes">--</div>
</div>

<div id="monitoring-content" class="content-layer">
  <div class="temp-item">
    <div class="temp-label">CPU</div>
    <div class="temp-value" id="cpu-temp">--¬∞</div>
  </div>
  <div class="temp-item">
    <div class="temp-label">GPU</div>
    <div class="temp-value" id="gpu-temp">--¬∞</div>
  </div>
</div>

<div id="controls">
  <!-- HORLOGE ULTRA -->
  <div class="control-group">
    <label>Taille Heures</label>
    <input type="range" id="hours-size" min="5" max="800" value="140" step="5">
  </div>
  <div class="control-group">
    <label>Taille Minutes</label>
    <input type="range" id="minutes-size" min="5" max="600" value="100" step="5">
  </div>
  <div class="control-group">
    <label>Gras Heures</label>
    <input type="range" id="hours-weight" min="100" max="900" value="900">
  </div>
  <div class="control-group">
    <label>Gras Minutes</label>
    <input type="range" id="minutes-weight" min="100" max="900" value="700">
  </div>
  <div class="control-group">
    <label>Espacement H-M</label>
    <input type="range" id="hours-spacing" min="-300" max="200" step="1" value="0">
  </div>
  
  <!-- MONITORING ULTRA -->
  <div class="control-group">
    <label>Taille Temp√©ratures</label>
    <input type="range" id="temp-size" min="5" max="500" value="80" step="5">
  </div>
  <div class="control-group">
    <label>Taille Labels</label>
    <input type="range" id="label-size" min="5" max="100" value="18" step="1">
  </div>
  <div class="control-group">
    <label>Gras Temp√©ratures</label>
    <input type="range" id="temp-weight" min="100" max="900" value="900">
  </div>
  <div class="control-group">
    <label>Gras Labels</label>
    <input type="range" id="label-weight" min="100" max="900" value="600">
  </div>
  <div class="control-group">
    <label>Espacement CPU-GPU</label>
    <input type="range" id="temp-spacing" min="-600" max="600" step="5" value="80">
  </div>
  <div class="control-group">
    <label>Espacement Label-Temp</label>
    <input type="range" id="temp-gap" min="-100" max="100" step="1" value="8">
  </div>
  <div class="control-group">
    <label>Opacit√© Labels</label>
    <input type="range" id="label-opacity" min="0" max="1" step="0.05" value="0.8">
  </div>
  <div class="control-group">
    <label>Glow Intensit√©</label>
    <input type="range" id="glow-intensity" min="0" max="50" value="10">
  </div>
  
  <!-- POSITIONNEMENT ULTRA -->
  <div class="control-group">
    <label>Pos Y Horloge (%)</label>
    <input type="range" id="clock-y" min="-50" max="50" step="1" value="0">
  </div>
  <div class="control-group">
    <label>Pos Y Monitoring (%)</label>
    <input type="range" id="monitoring-y" min="-50" max="50" step="1" value="0">
  </div>
  
  <!-- BACKGROUND -->
  <div class="control-group">
    <label>üìÅ Glisser image</label>
    <div class="file-upload" id="file-upload">Glisser image</div>
  </div>
  <div class="control-group">
    <label>URL Fond</label>
    <input type="text" id="bg-url" placeholder="URL image">
  </div>
  <div class="control-group">
    <label>Pos X (%)</label>
    <input type="range" id="bg-x" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Pos Y (%)</label>
    <input type="range" id="bg-y" min="0" max="100" value="50">
  </div>
  <div class="control-group">
    <label>Taille Fond (%)</label>
    <input type="range" id="bg-size" min="25" max="500" value="100">
  </div>
  
  <!-- EFFETS -->
  <div class="control-group">
    <label>Luminosit√©</label>
    <input type="range" id="brightness" min="0.1" max="5" step="0.1" value="1.2">
  </div>
  <div class="control-group">
    <label>Contraste</label>
    <input type="range" id="contrast" min="0.1" max="5" step="0.1" value="1.3">
  </div>
  <div class="control-group">
    <label>Saturation</label>
    <input type="range" id="saturation" min="0" max="5" step="0.1" value="1.2">
  </div>
  
  <!-- GRADIENT -->
  <div class="control-group">
    <label>Mode</label>
    <select id="color-mode">
      <option value="negative">N√©gatif</option>
      <option value="gradient">Gradient</option>
    </select>
  </div>
  <div class="control-group">
    <label>Couleur 1</label>
    <input type="color" id="primary-color" value="#ff6b6b">
  </div>
  <div class="control-group">
    <label>Couleur 2</label>
    <input type="color" id="secondary-color" value="#4ecdc4">
  </div>
  <div class="control-group">
    <label>Couleur 3</label>
    <input type="color" id="accent-color" value="#45b7d1">
  </div>
  <div class="control-group">
    <label>Vitesse (s)</label>
    <input type="range" id="gradient-speed" min="1" max="15" step="0.5" value="4">
  </div>
</div>

<button id="toggle-panel">‚öôÔ∏è</button>

<script>
const elements = {
  hours: document.getElementById('hours'),
  minutes: document.getElementById('minutes'),
  cpuTemp: document.getElementById('cpu-temp'),
  gpuTemp: document.getElementById('gpu-temp'),
  cpuLabel: document.querySelector('.temp-item:first-child .temp-label'),
  gpuLabel: document.querySelector('.temp-item:last-child .temp-label'),
  clockContent: document.getElementById('clock-content'),
  monitoringContent: document.getElementById('monitoring-content'),
  bgLayer: document.getElementById('bg-layer'),
  controlsPanel: document.getElementById('controls'),
  togglePanel: document.getElementById('toggle-panel')
};

const controls = {};
document.querySelectorAll('#controls input, #controls select').forEach(el => {
  controls[el.id] = el;
});

// UPDATE AVEC MAX CONTROL
function updateDisplay() {
  // INLINE STYLES MAX
  elements.hours.style.fontSize = `${controls['hours-size'].value}px`;
  elements.hours.style.fontWeight = controls['hours-weight'].value;
  elements.minutes.style.fontSize = `${controls['minutes-size'].value}px`;
  elements.minutes.style.fontWeight = controls['minutes-weight'].value;
  elements.minutes.style.marginTop = `${controls['hours-spacing'].value}px`;
  
  const tempSize = controls['temp-size'].value;
  const labelSize = controls['label-size'].value;
  elements.cpuTemp.style.fontSize = `${tempSize}px`;
  elements.gpuTemp.style.fontSize = `${tempSize}px`;
  elements.cpuTemp.style.fontWeight = controls['temp-weight'].value;
  elements.gpuTemp.style.fontWeight = controls['temp-weight'].value;
  elements.cpuLabel.style.fontSize = `${labelSize}px`;
  elements.gpuLabel.style.fontSize = `${labelSize}px`;
  elements.cpuLabel.style.fontWeight = controls['label-weight'].value;
  elements.gpuLabel.style.fontWeight = controls['label-weight'].value;
  elements.cpuLabel.style.opacity = controls['label-opacity'].value;
  elements.gpuLabel.style.opacity = controls['label-opacity'].value;
  
  // ESPACEMENTS ULTRA
  elements.monitoringContent.style.gap = `${controls['temp-spacing'].value}px`;
  const tempGap = controls['temp-gap'].value;
  elements.cpuLabel.style.marginBottom = `${tempGap}px`;
  elements.gpuLabel.style.marginBottom = `${tempGap}px`;
  
  // GLOW
  const glow = `${controls['glow-intensity'].value}px`;
  elements.cpuTemp.style.textShadow = `0 0 ${glow} currentColor`;
  elements.gpuTemp.style.textShadow = `0 0 ${glow} currentColor`;
  
  // POSITIONNEMENT VERTICAL
  elements.clockContent.style.transform = `translateY(${controls['clock-y'].value}%)`;
  elements.monitoringContent.style.transform = `translateY(${controls['monitoring-y'].value}%)`;
  
  // BACKGROUND
  const url = controls['bg-url'].value.trim();
  if (url) {
    const img = new Image();
    img.onload = () => elements.bgLayer.style.backgroundImage = `url('${url}')`;
    img.onerror = () => elements.bgLayer.style.background = '#1a1a1a';
    img.src = url;
  }
  elements.bgLayer.style.backgroundPosition = `${controls['bg-x'].value}% ${controls['bg-y'].value}%`;
  elements.bgLayer.style.backgroundSize = `${controls['bg-size'].value}% auto`;
  
  // EFFETS
  document.documentElement.style.setProperty('--brightness', controls['brightness'].value);
  document.documentElement.style.setProperty('--contrast', controls['contrast'].value);
  document.documentElement.style.setProperty('--saturation', controls['saturation'].value);
  document.documentElement.style.setProperty('--primary-color', controls['primary-color'].value);
  document.documentElement.style.setProperty('--secondary-color', controls['secondary-color'].value);
  document.documentElement.style.setProperty('--accent-color', controls['accent-color'].value);
  document.documentElement.style.setProperty('--gradient-angle', `${45}deg`);
  document.documentElement.style.setProperty('--gradient-speed', `${controls['gradient-speed'].value}s`);
  
  document.body.className = controls['color-mode'].value;
  
  // FORCE REPAINT
  [elements.hours, elements.minutes, elements.cpuTemp, elements.gpuTemp].forEach(el => {
    el.style.transform = 'scale(1)';
    el.offsetHeight;
  });
  
  // SAVE
  Object.keys(controls).forEach(key => localStorage.setItem(key, controls[key].value));
}

// Horloge
function updateClock() {
  const now = new Date();
  elements.hours.textContent = now.getHours().toString().padStart(2, '0');
  elements.minutes.textContent = now.getMinutes().toString().padStart(2, '0');
}
setInterval(updateClock, 1000); updateClock();

// Cycle
let showClock = true;
function cycleContent() {
  if (showClock) {
    elements.clockContent.classList.add('active');
    elements.monitoringContent.classList.remove('active');
  } else {
    elements.monitoringContent.classList.add('active');
    elements.clockContent.classList.remove('active');
  }
  showClock = !showClock;
}
setInterval(cycleContent, 10000);

// Monitoring
function simulateData() {
  elements.cpuTemp.textContent = `${Math.round(40 + Math.random() * 40)}¬∞`;
  elements.gpuTemp.textContent = `${Math.round(45 + Math.random() * 50)}¬∞`;
}
setInterval(simulateData, 3000);

window.nzxt = {
  v1: { 
    onMonitoringDataUpdate: data => {
      elements.cpuTemp.textContent = data?.cpus?.[0]?.temperature ? `${Math.round(data.cpus[0].temperature)}¬∞` : '--¬∞';
      elements.gpuTemp.textContent = data?.gpus?.[0]?.temperature ? `${Math.round(data.gpus[0].temperature)}¬∞` : '--¬∞';
    }
  }
};

// Drag background
let isDragging = false, startX, startY;
elements.bgLayer.addEventListener('mousedown', e => {
  isDragging = true; startX = e.clientX; startY = e.clientY;
  elements.bgLayer.style.transition = 'none';
});
document.addEventListener('mousemove', e => {
  if (!isDragging) return;
  const dx = (e.clientX - startX) / window.innerWidth * 100;
  const dy = (e.clientY - startY) / window.innerHeight * 100;
  controls['bg-x'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-x'].value) + dx));
  controls['bg-y'].value = Math.max(0, Math.min(100, parseFloat(controls['bg-y'].value) + dy));
  updateDisplay(); 
  startX = e.clientX; startY = e.clientY;
});
document.addEventListener('mouseup', () => {
  isDragging = false; 
  elements.bgLayer.style.transition = 'filter 0.3s ease, background-position 0.2s ease';
});

// File upload
const fileInput = document.getElementById('file-input');
const fileUpload = document.getElementById('file-upload');
function loadImageFile(file) {
  if (!file.type.startsWith('image/')) return;
  const reader = new FileReader();
  reader.onload = e => {
    elements.bgLayer.style.backgroundImage = `url(${e.target.result})`;
    localStorage.setItem('bg-image', e.target.result);
  };
  reader.readAsDataURL(file);
}
fileUpload.addEventListener('click', () => fileInput.click());
fileUpload.addEventListener('dragover', e => { e.preventDefault(); fileUpload.style.borderColor = '#4ecdc4'; });
fileUpload.addEventListener('dragleave', () => fileUpload.style.borderColor = 'rgba(255,255,255,0.3)');
fileUpload.addEventListener('drop', e => {
  e.preventDefault(); fileUpload.style.borderColor = 'rgba(255,255,255,0.3)';
  if (e.dataTransfer.files[0]) loadImageFile(e.dataTransfer.files[0]);
});
fileInput.addEventListener('change', e => { if (e.target.files[0]) loadImageFile(e.target.files[0]); });

// TOGGLE PANEL COMME AVANT
elements.togglePanel.addEventListener('click', () => {
  const isVisible = elements.controlsPanel.style.display === 'flex';
  if (isVisible) {
    elements.controlsPanel.style.display = 'none';
    elements.togglePanel.textContent = '‚öôÔ∏è';
    elements.togglePanel.classList.remove('show');
  } else {
    elements.controlsPanel.style.display = 'flex';
    elements.togglePanel.textContent = '‚úï';
    elements.togglePanel.classList.add('show');
  }
});

// Events
Object.values(controls).forEach(control => {
  ['input', 'change'].forEach(event => {
    control.addEventListener(event, updateDisplay);
  });
});

// Load
function loadSettings() {
  Object.keys(controls).forEach(key => {
    const saved = localStorage.getItem(key);
    if (saved !== null) controls[key].value = saved;
  });
  const savedBg = localStorage.getItem('bg-image');
  if (savedBg) elements.bgLayer.style.backgroundImage = `url(${savedBg})`;
  updateDisplay();
  elements.controlsPanel.style.display = 'none';
  elements.togglePanel.textContent = '‚öôÔ∏è';
  elements.togglePanel.classList.remove('show');
}

loadSettings();
elements.clockContent.classList.add('active');
updateDisplay();
</script>
</body>
</html>
